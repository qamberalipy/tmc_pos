<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Payment Receipt</title>
  <style>
    @page { size: A5 landscape; margin: 0mm; }
    @media print {
      .no-print { display: none !important; }
      body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
    }
    body {
      margin: 0; background: #f2f2f2; font-family: Arial, sans-serif; font-size: 11px;
      display: flex; justify-content: center; padding: 8px;
    }
    .receipt {
      width: 210mm; height: 140mm; box-sizing: border-box; padding: 6mm;
      background: #fff; display: flex; flex-direction: column;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.12); color: #000;
    }
    .header { display: flex; justify-content: center; align-items: center; margin-bottom: 4mm; flex-direction: column;}
    .header img { max-width: 300px; height: auto; margin-bottom: 5px; }
    .title-box { font-size: 14px; font-weight: bold; border: 1px solid #000; padding: 4px 12px; border-radius: 4px; background: #eee;}
    
    .pin-section {
      margin-top: 2mm; padding: 4px; border: 1px solid #000; font-size: 11px;
      display: flex; justify-content: space-between; background: #f5f5f5;
    }
    .details { display: flex; justify-content: space-between; margin-top: 8px; font-size: 12px; }
    .details div { margin-bottom: 4px; }
    
    .payment-box {
        margin-top: 15px; border: 1px solid #000; padding: 0;
    }
    .payment-header { background: #000; color: #fff; padding: 6px; font-weight: bold; text-align: center;}
    .payment-body { padding: 15px; display: flex; justify-content: space-between; align-items: center; }
    
    .amount-large { font-size: 24px; font-weight: bold; }
    
    .footer {
      font-size: 9px; border-top: 1px solid #000; padding-top: 4px;
      text-align: center; margin-top: auto;
    }
    .controls { text-align: center; margin-top: 10px; }
    button { padding: 8px 15px; background: #007bff; color: #fff; border: none; cursor: pointer; border-radius: 4px;}
  </style>
</head>
<body>
  <div>
    <div class="receipt">
      <div class="header">
        <img src="{{ url_for('booking.static', filename='logo_for_receipt.png') }}" alt="logo">
        <div class="title-box">DUE CLEARANCE RECEIPT</div>
      </div>

      <div class="pin-section">
        <div>Receipt #: {{ receipt.receipt_no }}</div>
        <div>Booking ID: {{ receipt.booking_id }}</div>
        <div>Date: {{ receipt.date }}</div>
      </div>

      <div class="details">
        <div>
          <div><b>Patient Name:</b> {{ receipt.patient_name }}</div>
          <div><b>MR No:</b> {{ receipt.mr_no }}</div>
          <div><b>Gender/Age:</b> {{ receipt.gender }} / {{ receipt.age }}</div>
        </div>
        <div style="text-align: right;">
          <div><b>Contact:</b> {{ receipt.contact_no }}</div>
          <div><b>Received By:</b> {{ receipt.received_by }}</div>
        </div>
      </div>

      <div class="payment-box">
          <div class="payment-header">PAYMENT DETAILS</div>
          <div class="payment-body">
              <div>
                  <div style="font-size: 10px; color: #666;">Payment Mode</div>
                  <div style="font-weight: bold; font-size: 14px;">{{ receipt.payment_mode }}</div>
              </div>
              <div style="text-align: center;">
                  <div style="font-size: 10px; color: #666;">Amount Received</div>
                  <div class="amount-large">Rs. {{ "{:,.0f}".format(receipt.amount_paid) }}</div>
              </div>
          </div>
      </div>

      <div style="margin-top: 15px; border-top: 1px dashed #ccc; padding-top: 10px;">
          <table style="width: 100%; font-size: 12px;">
              <tr>
                  <td style="text-align: right; padding: 2px;">Total Booking Amount:</td>
                  <td style="text-align: right; width: 100px; font-weight: bold;">{{ "{:,.0f}".format(receipt.total_booking_amount) }}</td>
              </tr>
              <tr>
                  <td style="text-align: right; padding: 2px;">Remaining Balance (Due):</td>
                  <td style="text-align: right; width: 100px; font-weight: bold; color: #d32f2f;">{{ "{:,.0f}".format(receipt.remaining_due) }}</td>
              </tr>
          </table>
      </div>

      <div class="footer">
        <div style="font-weight:600;">
          {{ receipt.branch_name }} | {{ receipt.branch_address }}
        </div>
        <div>System Generated Receipt</div>
      </div>
    </div>

    <div class="controls no-print">
      <button onclick="window.print()">Print Receipt</button>
    </div>
  </div>
</body>
</html>